<!DOCTYPE html>
<html LANG="EN">
  <head>
    <title>Internationalization Best Practices for Spec Developers (Draft)</title>
    <meta charset='utf-8'/>
	<link rel="stylesheet" href="local.css" type="text/css" />
    <!-- 
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->
    <script src='http://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>
    <script class='remove'>
      var respecConfig = {
          // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
          specStatus:           "ED",
          noRecTrack: 			true, 
          // the specification's short name, as in http://www.w3.org/TR/short-name/
          shortName:            "bp-i18n-specdev",

          // if your specification has a subtitle that goes below the main
          // formal title, define it here
          // subtitle   :  "an excellent document",

          // if you wish the publication date to be other than today, set this
         // publishDate:  "2015-02-03",

          // if the specification's copyright date is a range of years, specify
          // the start date here:
          // copyrightStart: "2005"

          // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
          // and its maturity status
           //previousPublishDate:  "2014-08-24",
           //previousMaturity:  "WD",

          // if there a publicly available Editor's Draft, this is the link
          edDraftURI:           "http://w3c.github.io/bp-i18n-specdev",

          // if this is a LCWD, uncomment and set the end of its review period
          // lcEnd: "2009-08-05",

          // if you want to have extra CSS, append them to this list
          // it is recommended that the respec.css stylesheet be kept
          //extraCSS:             [
		  //"http://dev.w3.org/2009/dap/ReSpec.js/css/respec.css",
		  //"http://www.w3.org/International/docs/counter-styles/local.css"],

          // editors, add as many as you like
          // only "name" is required
          editors:  [
              { name: "Richard Ishida", url: "",
                company: "W3C", companyURL: "" },
          ],

          // authors, add as many as you like. 
          // This is optional, uncomment if you have authors as well as editors.
          // only "name" is required. Same format as editors.

          //authors:  [
           //   { name: "Ian Hickson", url: "",
           //    company: "", companyURL: "" },
           //  { name: "Tantek Çelı̇k", url: "",
           //    company: "", companyURL: "" },
           //  { name: "Tab Atkins", url: ""},
          //],
          
          // name of the WG
          wg:           "Internationalization Working Group",
          
          // URI of the public WG page
          wgURI:        "http://www.w3.org/International/core/",
          
          // name (without the @w3c.org) of the public mailing to which comments are due
          wgPublicList: "www-international",
          
          // URI of the patent status for this WG, for Rec-track documents
          // !!!! IMPORTANT !!!!
          // This is important for Rec-track documents, do not copy a patent URI from a random
          // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
          // Team Contact.
          wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/32113/status",
      };
    </script>
  </head>
  <body>
  <p id="sotd">This document provides advice to specification developers about how to incorporate requirements for international use. What is currently available here is expected to be useful immediately, but to grow over time as knowledge applied in reviews and discussions can be crystallized into guidelines.</p>
    <p id='abstract'>The checklists in <a href="http://www.w3.org/International/techniques/developing-specs">Internationalization Techniques: 
Developing specifications</a> provide advice to  developers about how to incorporate requirements for international use in their specifications. This document is a place to find explanations, examples and rationales that support the recommendations in the checklists. It is likely to be regularly updated and changed.</p>
    
  <section id="intro">
    <h2>Introduction</h2>
      <p>Developers of specifications need advice  to ensure that what they produce will work for communities around the globe.</p>
      <p>The Internationalization (i18n) WG tries to assist working groups  by reviewing specifications and engaging in discussion. Often, however, such interventions come later in the process than would be ideal, or mean that the i18n WG has to repeat the same information for each working group it interacts with.</p>
      <p>It would be better if specification developers could access a checklist of best practices, which points  to explanations, examples and rationales where developers need it. Developers would then be able to build this knowledge into their work from the earliest stages, and could thereby reduce  rework needed when the i18n WG reviews their specification.</p>
      <p>The beginnings of a checklist already exist in the page <a href="http://www.w3.org/International/techniques/developing-specs-dynamic">Internationalization Techniques: Developing specifications</a>. In addition to recommendations (with links), that page points to other documents and pages that provide useful information.</p>
      <p>The document you are currently reading sets out to provide explanations, examples and rationales for recommendations that are not currently expanded upon elsewhere. The techniques page can then point here for detailed information. In practice, this document may also be used to develop ideas and organize them before the recommendations get into the techniques page.</p>
      <p>Note that the number associated with a given best practice statement (the text in the yellow box) may change as the document changes. If you want to refer to a particular best practise statement in a time-persistent way, use the id associated with it.</p>
  </section>
  <section id="characters">
<h2>Working with characters</h2>
<p>See the <a href="http://www.w3.org/TR/charmod/">Character Model for the World Wide Web: Fundamentals</a> for basic guidelines related to the use of characters and encodings.</p>
<p>See the <a href="https://encoding.spec.whatwg.org/">Encoding</a> specification for further guidelines related to use of character encodings.</p>
<p>Another Character Model document is currently in development, entitled <a href="http://w3c.github.io/charmod-norm/">String Matching and Searching</a>. It looks at issues that arise when you try to compare two strings, be it identifiers or authored content.</p>
<p>The  techniques page contains a checklist of recommendations (with links to explanations) under the following headings:</p>
<ul>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#characterdef">Choosing a definition of  'character' </a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#referencemodel">Defining a Reference Processing Model </a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#ranges">Including and excluding character ranges</a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#pua">Using the Private Use Area </a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#choosing">Choosing character encodings </a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#identifying">Identifying character encodings </a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#escapes">Designing character escapes </a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#storing">Storing text </a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#sort">Specifying sort and search functionality </a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#string">Defining 'string' </a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#indexing">Indexing strings </a></li>
					<li><a href="http://www.w3.org/International/techniques/developing-specs#unicoderef">Referencing the Unicode Standard </a></li>
  </ul>
</section>
<section id="language">
  <h2>Working with language</h2>
  <section id="lang_resource">
    <h3>Establishing the language of a resource as a whole</h3>
    <p>Here we are talking about a whole HTML page, an XML document, a Json file, a WebVTT script, etc. </p>
    <p class="bp" id="lang_whole_res"><a class="self" href="#lang_whole_res"></a>It must be possible to indicate the default text-processing language for the resource as a whole.</p>
    <p>It saves trouble to identify the language, or at least the default language, of the resource as a whole in one place. For example, in an HTML file, this is done by setting the <code class="kw" translate="no">lang</code> attribute on the <code class="kw" translate="no">html</code> element.</p>
    <p>Content within the resource should inherit the language so set, unless it is specifically overridden.</p>
    <p class="bp" id="lang_tp_meta"><a class="self" href="#lang_tp_meta"></a>Consider whether it is necessary to have separate declarations for the text-processing language and metadata about the intended linguistic characteristics of the consumer.</p>
    <p>The <dfn>text-processing language</dfn> is the language that is relevant for processing the content when it comes to spell-checking, styling, voice production, etc. For such operations, only one language should be identified at a time for a given range of content.</p>
    <p>Metadata about the the intended linguistic characteristics of the consumer describes the intended users of the resource as a whole, rather than specific ranges of content. For example, a blog page for  an Indian technical community may contain equal numbers of posts in English and an Hindi. It may be useful to express that, as a whole, this resource contains content in both those languages (without specifying which bits of content are in which language).</p>
  </section>

<section id="lang_block">
  <h3>Establishing the language of blocks, paragraphs, or similar chunks of content</h3>
  <p>The word <dfn>block</dfn> is used here to refer to a structural component within the resource as a whole that groups content together and separates it from adjacent content such that the boundaries between one block and another are equivalent to paragraph or section boundaries in text. For example, this could refer to a block or paragraph in XML or HTML, an object declaration in Json, a cue in WebVTT, etc. Contrast this with <dfn>inline</dfn> content, which describes a range within a paragraph, sentence, etc.</p>
  <p class="bp" id="lang_block_inherit"><a class="self" href="#lang_block_inherit"></a>By default, blocks of content should inherit the text-processing language set for the resource as a whole.  </p>
  <p class="bp" id="lang_block_change"><a class="self" href="#lang_block_change"></a>It should be possible to indicate a change in language for blocks of content where the language changes.</p>
</section>

<section id="lang_inline">
  <h3>Establishing the language of inline content spans</h3>
  <p>Here we&nbsp;refer to content that switches to a different language in the middle of a paragraph or string.</p>
  <p class="bp" id="lang_inline_spans"><a class="self" href="#lang_inline_spans"></a>It should be possible to indicate language for spans of inline text where the language changes.</p>
  <p>Where a switch in language can affect operations on the content, such as spell-checking, rendering, styling, voice production, translation, information retrieval, and so forth, it is necessary to indicate the range of text affected and identify the language&nbsp;of that content.</p>
</section>

  <section id="lang_values">
    <h3>Defining language values</h3>
    <p class="bp" id="lang_values_bcp"><a class="self" href="#lang_values_bcp"></a>Language values should be BCP47 language tags.</p>
  </section>
  
  <section id="lang_negotiation">
    <h3>Providing for  content negotiation based on language</h3>
    <p class="bp" id="lang_neg"><a class="self" href="#lang_neg"></a>In a multilingual environment it must be possible for the user to receive text in the language they prefer. This may depend on implicit user preferences based on the user's system or browser setup, or on user settings explicitly negotiated with the user. </p>
  </section>
</section>


<section id="direction">
  <h2>Working with text direction</h2>
  <section id="bidi_resource">
    <h3>Setting the bidi direction for the resource as a whole</h3>
    <p class="bp" id="bidi_whole_res"><a class="self" href="#bidi_whole_res"></a>The content author must be able to indicate the RTL/LTR direction of the content as a whole, ie. set the overall base direction. </p>
    <p class="bp" id="bidi_res_default"><a class="self" href="#bidi_res_default"></a>The default text direction should be declared as LTR. </p>
  </section>

<section id="bidi_block">
  <h3>Establishing the bidi direction for blocks, paragraphs, or similar chunks of content</h3>
  <p class="bp" id="bidi_block_change"><a class="self" href="#bidi_block_change"></a>The content author must be able to indicate parts of the text where the base direction changes. This should be achieved using attributes or metadata at a block level, and not rely on Unicode control characters. </p>
  <p class="bp" id="bidi_block_auto"><a class="self" href="#bidi_block_auto"></a>It must be possible to also set the direction for content fragments to auto. This means that the base direction will be determined by examining the content itself. A typical approach here would be to set the direction based on the first strong directional character outside of any markup. </p>
  <p class="bp" id="bidi_block_para"><a class="self" href="#bidi_block_para"></a>If the overall base direction is set to auto for plain text, the direction of content paragraphs should be determined on a paragraph by paragraph basis. </p>
  <p class="bp" id="bidi_block_befaft"><a class="self" href="#bidi_block_befaft"></a>To indicate the beginning and end of a block of text you should use 'before' and 'after' (maybe block-start/block-end - the terminology is changing), rather than 'top' and 'bottom'. </p>
  <p class="bp" id="lang_neg"><a class="self" href="#lang_neg"></a>Provide dedicated attributes for control of base direction and bidirectional overrides; do not rely on the user applying style properties to arbitrary markup to achieve bidi control </p>
</section>

<section id="bidi_inline">
  <h3>Establishing the bidi direction for spans of inline content</h3>
  <p class="bp" id="bidi_inline_change"><a class="self" href="#bidi_inline_change"></a>It must be possible to indicate spans of inline text where the base direction changes. If markup is available, this is the preferred method. Otherwise your specification must require that Unicode control characters are recognized by the receiving application, and correctly implemented.</p>
  <p class="bp" id="bidi_inline_auto"><a class="self" href="#bidi_inline_auto"></a>It must be possible to also set the direction for a span to auto. This means that the base direction will be determined by examining the content itself. A typical approach here would be to set the direction based on the first strong directional character outside of any markup.</p>
  <p class="bp" id="bidi_inline_rli"><a class="self" href="#bidi_inline_rli"></a>If users use Unicode control characters, the RLI/LRI/FSI...PDI characters must be supported by the application and recommended (rather than RLE/LRE...PDF) by the spec.</p>
  <p class="bp" id="bidi_inline_rlm"><a class="self" href="#bidi_inline_rlm"></a>Use of RLM/LRM should be minimised, and expectations of what those controls can and cannot do should be clear in the spec.</p>
  <p class="bp" id="bidi_inline_start_end"><a class="self" href="#bidi_inline_start_end"></a>To indicate the start/end of a line or paragraph you should use 'start' and 'end' rather than 'left' and 'right'. </p>
  <p class="bp" id="bidi_inline_dedicated_attr"><a class="self" href="#bidi_inline_dedicated_attr"></a>Provide dedicated attributes for control of base direction and bidirectional overrides; do not rely on the user applying style properties to arbitrary markup to achieve bidi control.</p>
  <p class="bp" id="bidi_inline_all_elems"><a class="self" href="#bidi_inline_all_elems"></a>Allow bidi attributes on all inline elements in markup that contain text.</p>
  <p class="bp" id="bidi_inline_embed"><a class="self" href="#bidi_inline_embed"></a>Provide attributes that allow the user to (a) create an embedded base direction or (b) override the bidirectional algorithm altogether; the attribute should allow the user to set the direction to ltr or rtl in either of these two scenarios.</p>
</section>

<section id="vertical">
    <h3>Enabling vertical text display</h3>
    <p class="bp" id="vertical_support"><a class="self" href="#vertical_support"></a>It should be possible to render text vertically for languages such as Japanese, Chinese, Korean, Mongolian, etc. </p>
    <p class="bp" id="vertical_lr_rl"><a class="self" href="#vertical_lr_rl"></a>Vertical text must support line progression from LTR (eg. Mongolian) and RTL (eg. Japanese) </p>
  </section>

  <section id="box_posn">
    <h3>Setting box positioning coordinates when text direction varies</h3>
    <p class="bp" id="vertical_box_posn"><a class="self" href="#vertical_box_posn"></a>Box positioning coordinates must take into account whether the text is horizontal or vertical </p>
  </section>
</section>


<section id="typography">
<h2>Typographic support</h2>
<p class="bp" id="type_line_height"><a class="self" href="#type_line_height"></a>Line heights must allow for characters that are taller than English.</p>
<p class="bp" id="type_box_size"><a class="self" href="#type_box_size"></a>Box sizes must allow for text expansion in translation.</p>
<p class="bp" id="type_ruby"><a class="self" href="#type_ruby"></a>Ruby text alongside base text should be supported for CJK text.</p>
</section>


<section id="plaintext">
<h2>Plain text support</h2>
<p class="bp" id="plain_avoid"><a class="self" href="#plain_avoid"></a>Avoid natural language text in elements that only allow for plain text and in attribute values.</p>
<p class="bp" id="type_box_size"><a class="self" href="#type_box_size"></a>Provide a span-like element that can be used for any text content to apply information needed for internationalization.</p>
<p>Internationalization information may include a change of language, bidirectional text behaviour changes, translate flags, etc.</p>
</section>


<section id="case">
<h2>Case distinctions</h2>
<p class="bp" id="case_identifiers"><a class="self" href="#case_identifiers"></a>Identifiers should be case-sensitive.</p>
</section>


<section class="appendix" id="app_b">
  <h2>References</h2>
  <p>None.</p>
<!--dl>
  <dt id="css3list" title="CSS3LIST">[COUNTERS]</dt>
  <dd>Tab Atkins Jr.. <a href="http://www.w3.org/TR/css-counter-styles-3/">CSS Counter Styles Level 3</a>.   3 February 2015. W3C Candidate Recommendation. URL: <a href="http://www.w3.org/TR/css-counter-styles-3/">http://www.w3.org/TR/css-counter-styles-3/</a></dd>
  </dl-->
  </section>

<section class="appendix" id="app-c">
  <h2> Revision Log</h2>
  <ol>
    <li>tbd</li>
  </ol>
</section>


<section class='appendix'>
<h2>Acknowledgements</h2>
<p>tbd</p>
</section>
  </body>
</html>
